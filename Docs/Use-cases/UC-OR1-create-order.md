# UC-OR1: Создание заказа

**Актор:** Покупатель  
**Цель:** Оформить заказ на основе содержимого корзины.

## Предусловия
- Корзина не пуста.
- Товар в наличии.
- Доступны выбранные способы оплаты и доставки.

## Основной сценарий
1. Пользователь проверяет корзину и нажимает "Оформить заказ".
2. UI отправляет запрос `/order/create` через API Gateway.
3. Gateway перенаправляет запрос в Order Service.
4. Order Service:
   - валидирует содержимое корзины
   - подтверждает остатки в Stock Service
   - рассчитывает итоговую стоимость
   - запрашивает подтверждение платежа (mock / Payment Service)
5. Платёж подтвержден → создается заказ.
6. Статус заказа: `CREATED`.
7. Пользователь получает подтверждение.

## Альтернативные потоки
- **4а. Недостаточно товара** → сообщение об обновлении остатков.
- **4б. Ошибка платежа** → статус `FAILED_PAYMENT`, уведомление.

## Постусловия
- Списание товара со склада.
- Корзина очищается (по бизнес-правилу).
