# UC-NS2: Отправка уведомлений по событиям

**Актор:** Message Broker (RabbitMQ/Kafka) / Другие сервисы (Order, Catalog, Review)

## Цель
Получить событие из системы и доставить уведомление пользователю.

## Предусловия
- Клиент подписан или доступен для последующей доставки.
- В очереди брокера размещаются события вида: OrderCreated, PriceChanged, NewReviewAdded и т.п.

## Основной сценарий
1. Notification Service получает событие из брокера.
2. Определяется тип события и целевой пользователь (или список пользователей).
3. Формируется текст уведомления или payload.
4. Если клиент онлайн → отправка через WebSocket/SignalR.
5. Если клиент оффлайн → сохранение в хранилище/отложенная доставка.

## Альтернативные сценарии
- **A1:** Неизвестный формат события → запись в DLQ или лог.
- **A2:** Ошибка при доставке онлайн → попытка повторной отправки.
- **A3:** Ошибка из-за недоступности брокера → ретрай с интервалом.

## Постусловия
- Клиент получает уведомление либо оно ожидает зручной доставки.
